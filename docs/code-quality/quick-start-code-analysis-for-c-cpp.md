---
title: 'クイックスタート: C/C++ のコード分析'
description: Visual Studio のコードC++に対して静的分析を実行し、一般的なコーディングの問題と欠陥を検出します。
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
ms.openlocfilehash: 5ee8f702ddf489732f664ae73eed75b18dc46e86
ms.sourcegitcommit: 7bea0420d0e476287641edeb33a9d5689a98cb98
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/17/2020
ms.locfileid: "79467175"
---
# <a name="quickstart-code-analysis-for-cc"></a>クイックスタート: C/C++ のコード分析

C または C++ コードのコード分析を定期的に実行することで、アプリケーションの品質を向上できます。 これにより、一般的な問題、優れたプログラミング手法からの逸脱、テストで見つけることが難しい不具合を検出できます。 コード分析の警告はコンパイラのエラーや警告とは異なります。コード分析は、有効であってもコードの作成者やコードを利用する他のユーザーにとって問題になる可能性がある特定のコード パターンを検索するからです。

## <a name="configure-rule-sets-for-a-project"></a>プロジェクトの規則セットの構成

1. **ソリューションエクスプローラー**で、プロジェクト名のショートカットメニューを開き、 **[プロパティ]** を選択します。

1. 必要に応じて、 **[構成]** と **[プラットフォーム]** の一覧で、ビルド構成とターゲットプラットフォームを選択します。

1. 選択した構成を使用してプロジェクトがビルドされるたびにコード分析を実行するには、 **[ビルド時にコード分析を有効にする]** チェックボックスをオンにします。 **[分析]** メニューを開き、[ *ProjectName* **でコード分析を実行**] または **[ファイルに対してコード分析を実行]** を選択して、手動でコード分析を実行することもできます。

1. 使用する[規則セット](using-rule-sets-to-specify-the-cpp-rules-to-run.md)を選択するか、[カスタム規則セット](using-rule-sets-to-specify-the-cpp-rules-to-run.md#to-create-a-rule-set-in-a-text-editor)を作成します。 LLVM/clang-cl を使用する場合は、「clang- [tidy を使用して](../code-quality/clang-tidy.md)Clang-tidy 分析オプションを構成する」を参照してください。

### <a name="standard-cc-rule-sets"></a>標準の C/C++ 規則セット

Visual Studio には、ネイティブ コードの規則として 2 つの標準セットが含まれています。

|ルール セット|説明|
|--------------|-----------------|
|Microsoft ネイティブ最小推奨規則|この規則セットは、ネイティブ コードの最も重大な問題 (潜在的なセキュリティ ホールやアプリケーションのクラッシュなど) に関するものです。 ネイティブ プロジェクトにカスタムの規則セットを作成する場合は、必ずこの規則セットを含める必要があります。|
|Microsoft ネイティブ推奨規則|この規則セットは、広範な問題を対象としています。 これには、Microsoft ネイティブ最小推奨規則のすべての規則が含まれています。|

## <a name="run-code-analysis"></a>コード分析の実行

プロジェクトのプロパティページの [コード分析] ページでは、プロジェクトをビルドするたびにコード分析を実行するように構成できます。 また、手動でコード分析を実行することもできます。

ソリューションでコード分析を実行するには

- **[ビルド]** メニューの **[ソリューションでコード分析を実行]** をクリックします。

プロジェクトでコード分析を実行するには

1. ソリューションエクスプローラーで、プロジェクトの名前を選択します。

1. **[ビルド]** メニューの [*プロジェクト名***でコード分析を実行**] をクリックします。

ファイルに対してコード分析を実行するには、次のようにします。

1. ソリューションエクスプローラーで、ファイルの名前を選択します。

1. **[ビルド]** メニューの **[ファイルでコード分析を実行]** を選択するか、 **ctrl + Shift + Alt + F7**キーを押します。

   プロジェクトまたはソリューションがコンパイルされ、コード分析が実行されます。 結果はエラー一覧に表示されます。

## <a name="analyze-and-resolve-code-analysis-warnings"></a>コード分析の警告の分析と解決

特定の警告を分析するには、エラー一覧で警告のタイトルを選択します。 警告を展開すると、問題に関する詳細情報が表示されます。 可能な場合は、コード分析に行番号と、警告の原因となった分析ロジックが表示されます。 問題の解決方法を含め、警告の詳細については、警告 ID を選択して、対応するオンラインヘルプトピックを表示します。

警告を選択すると、警告の原因となったコード行が Visual Studio のコードエディターで強調表示されます。

問題を理解した後は、コード内で解決できます。 次に、コード分析を再実行して、エラー一覧に警告が表示されなくなったこと、および修正によって新しい警告が発生していないことを確認します。

## <a name="suppress-code-analysis-warnings"></a>コード分析の警告を表示しない

コード分析警告の修正を行わないことを決定する場合があります。 コードを実装したときの警告の発生確率と、警告を解決するためのコード変更の量を比較して、解決しないことを選択できます。 または、警告で使用された分析が特定のコンテキストでは不適切であると判断できます。 個々の警告を非表示にして、エラー一覧に表示されないようにすることができます。

### <a name="to-suppress-a-warning"></a>警告を非表示にするには

1. 詳細情報が表示されない場合は、警告のタイトルを選択して展開します。

1. 警告の下部にある **[アクション]** リンクをクリックします。

1. **[メッセージの非]** 表示 をクリックし、 **[ソース内]** を選択します。

   メッセージを抑制すると、コード行の警告を抑制する `#pragma warning (disable:[warning ID])` が挿入されます。

## <a name="create-work-items-for-code-analysis-warnings"></a>コード分析警告用の作業項目の作成

作業項目トラッキング機能を使用して、Visual Studio 内からバグをログに記録できます。 この機能を使用するには、Team Foundation Server のインスタンスに接続する必要があります。

### <a name="to-create-a-work-item-for-one-or-more-cc-code-warnings"></a>1 つ以上の C/C++ コード警告用に作業項目を作成するには

1. エラー一覧で、[] を展開し、警告を選択します。

1. 警告のショートカットメニューで、 **[作業項目の作成]** を選択し、作業項目の種類を選択します。

1. 選択された警告に対して作業項目が 1 つ作成され、IDE のドキュメント ウィンドウに作業項目が表示されます。

1. 追加情報を追加し、 **[作業項目の保存]** を選択します。

## <a name="search-and-filter-code-analysis-results"></a>コード分析結果の検索とフィルター処理

警告メッセージの長い一覧の検索と、複数のプロジェクトから成るソリューションの警告をフィルター処理できます。

- **タイトルまたは警告 ID で警告をフィルター処理するに**は: 検索ボックスにキーワードを入力します。

- **警告を重要度順にフィルター処理する**: 既定では、コード分析メッセージには**警告**の重大度が割り当てられます。 1つまたは複数のメッセージの重大度を、カスタム規則セットの**エラー**として割り当てることができます。 **エラー一覧**の **重要度** 列で、ドロップダウン矢印をクリックし、フィルター アイコンをクリックします。 **[警告]** または **[エラー]** を選択すると、それぞれの重要度が割り当てられているメッセージのみが表示されます。 すべてのメッセージを表示するには、[**すべて選択]** を選択します。

## <a name="see-also"></a>参照

- [C/のコード分析C++](../code-quality/code-analysis-for-c-cpp-overview.md)
