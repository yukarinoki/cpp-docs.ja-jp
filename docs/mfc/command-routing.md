---
title: コマンド ルーティング
ms.date: 11/04/2016
helpviewer_keywords:
- MFC, command routing
- command handling [MFC], routing commands
- handlers [MFC]
- handlers, command [MFC]
- command routing
ms.assetid: 9393a956-bdd4-47c5-9013-dbd680433f93
ms.openlocfilehash: add047984f5a32e505e8a739922daa137b5e671d
ms.sourcegitcommit: 6052185696adca270bc9bdbec45a626dd89cdcdd
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/31/2018
ms.locfileid: "50541701"
---
# <a name="command-routing"></a>コマンド ルーティング

コマンドを使用するには、[プロパティ] ウィンドウを使って、コマンドとハンドラー関数を対応付けるメッセージ マップを作成する必要があります。 また、コマンド ハンドラーのほとんどを作成する必要もあります。

通常、Windows メッセージはメイン フレーム ウィンドウに送信されますが、コマンド メッセージはさらに他のオブジェクトにルーティングされます。 フレームワークは、コマンド ターゲット オブジェクトの標準シーケンスに従って、コマンドのハンドラーが存在すると思われるオブジェクトの 1 つにコマンドをルーティングします。 各コマンド ターゲット オブジェクトは、受信したメッセージを処理できるかどうかをメッセージ マップで確認します。

メッセージ マップを確認するタイミングは、コマンド ターゲット クラスによって異なります。 通常、クラスは、コマンドを最初に特定の他のオブジェクトにルーティングして、そのオブジェクトでコマンドを処理しようとします。 どのオブジェクトもコマンドを処理できない場合、元のクラスは独自のメッセージ マップをチェックします。 その後、元のクラスがハンドラー自体を提供できない場合は、そのコマンドをさらに他のコマンド ターゲットにルーティングします。 以下の「 [標準のコマンド ルート](#_core_standard_command_route) 」の表は、各クラスのチェック シーケンスを示しています。 コマンド ターゲットがコマンドをルーティングする一般的な順序は、次のとおりです。

1. 現在アクティブな子コマンド ターゲット オブジェクト

1. コマンド ターゲット自身

1. その他のコマンド ターゲット

このルーティング メカニズム比較、ハンドラーは、コマンドへの応答には、高価なの方法、ルーティングのコストは低いです。 フレームワークでコマンドが生成されるのは、ユーザーがユーザー インターフェイス オブジェクトを操作したときだけです。

### <a name="_core_standard_command_route"></a> 標準のコマンド ルート

|コマンドを受信したオブジェクトの種類 . .|コマンドを処理する機会が与えられるコマンド ターゲット オブジェクトとその順序|
|----------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|MDI フレーム ウィンドウ (`CMDIFrameWnd`)|1.アクティブな `CMDIChildWnd`<br />2.このフレーム ウィンドウ<br />3.アプリケーション (`CWinApp` オブジェクト)|
|ドキュメント フレーム ウィンドウ (`CFrameWnd`､ `CMDIChildWnd`)|1.アクティブ ビュー<br />2.このフレーム ウィンドウ<br />3.アプリケーション (`CWinApp` オブジェクト)|
|表示|1.このビュー<br />2.ビューにアタッチされたドキュメント|
|ドキュメント|1.このドキュメント<br />2.ドキュメントにアタッチされたドキュメント テンプレート|
|ダイアログ ボックス|1.このダイアログ ボックス<br />2.ダイアログ ボックスを所有するウィンドウ<br />3.アプリケーション (`CWinApp` オブジェクト)|

前の表の右側の列に他のオブジェクト (ドキュメントなど) が示されている場合は、左側の列の対応する項目を確認してください。 たとえば、右側の列を見ると、ビューがコマンドをドキュメントに転送していることがわかるので、左側の列の「ドキュメント」のルーティングも参照してください。

## <a name="see-also"></a>関連項目

[フレームワークがハンドラーを呼び出す方法](../mfc/how-the-framework-calls-a-handler.md)

